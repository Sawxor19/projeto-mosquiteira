<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Or√ßamento Telas Mosquiteiras</title>
<style>
* { box-sizing: border-box; }

body {
  font-family: 'Poppins', sans-serif;
  background: #1e1e1e;
  color: #eee;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: flex-start; /* topo em mobile */
  min-height: 100vh;
}

.container {
  max-width: 600px;
  width: 95%;  /* quase toda a tela em mobile */
  background: #2c2c2c;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 0 18px rgba(0,0,0,0.5);
  text-align: center;
  margin-top: 20px; /* espa√ßo no topo em mobile */
}

h2 { font-size: 22px; margin-bottom: 15px; }
h3 { font-size: 18px; margin-top: 20px; }

label {
  display: block;
  font-weight: 600;
  margin-top: 10px;
  font-size: 14px;
  color: #ccc;
  text-align: center;
}

input, select {
  width: 100%;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  border: 1px solid #555;
  margin-top: 5px;
  background:#3a3a3a;
  color:#eee;
  text-align: center;
}
input:focus, select:focus {
  border-color: #e74c3c;
  box-shadow: 0 0 6px #e74c3c77;
  outline: none;
}

button {
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 16px;
  transition: 0.2s;
  background: #8b0000;
  color: #fff;
  margin: 10px auto;
  display: block;
  max-width: 100%;
}
button:hover { background: #a00000; transform: translateY(-2px); }
button.add { width: 100%; }

.screens-grid {
  display: grid;
  grid-template-columns: 1fr; /* 1 coluna mobile-first */
  gap: 10px;
  margin-bottom: 15px;
}

.screen-item {
  border: 1px solid #444;
  border-radius: 10px;
  padding: 10px;
  background: #3a3a3a;
  display: flex;
  flex-direction: column;
}

.screen-header {
  font-weight: 600;
  margin-bottom: 5px;
  font-size: 15px;
  text-align: center;
  color:#eee;
}

.screen-row {
  display: flex;
  flex-direction: column;
  margin-bottom: 5px;
}

.value-display {
  background: #555;
  padding: 6px 8px;
  border-radius: 6px;
  font-weight: 600;
  text-align: center;
  margin-top: 4px;
  color:#fff;
}

.total-box {
  background: #444;
  padding: 12px;
  border-radius: 8px;
  margin-top: 10px;
  font-weight: bold;
  font-size: 15px;
  text-align: center;
}

/* Media Queries: tablets e desktop */
@media (min-width: 480px) {
  .screens-grid {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  }
  h2 { font-size: 24px; }
  h3 { font-size: 20px; }
  .screen-header { font-size: 16px; }
}
</style>
</head>
<body>
<div class="container">
  <h2>Or√ßamento Telas Mosquiteiras</h2>

  <label>Nome</label>
  <input id="nome" type="text" placeholder="Digite seu nome">

  <label>Telefone</label>
  <input id="telefone" type="text" placeholder="(13) 99999-9999">

  <label>Endere√ßo</label>
  <input id="endereco" type="text" placeholder="Rua / Av, n¬∫">

  <label>Bairro</label>
  <input id="bairro" type="text" placeholder="Digite o bairro">

  <h3>Telas</h3>
  <div id="screens" class="screens-grid"></div>
  <button class="add" onclick="addScreen()">‚ûï Adicionar Tela</button>

  <div class="total-box" id="totalBox">Total: R$ 0,00</div>

  <button class="send" onclick="sendWhatsApp()">üì≤ Enviar Or√ßamento</button>
  <button class="clear" onclick="resetForm()">üóëÔ∏è Limpar Tudo</button>
</div>

<script>
const $ = id => document.getElementById(id);
let screens = [];

function formatBRL(value){ return value.toLocaleString('pt-BR',{style:'currency',currency:'BRL'}); }
const tipoLabels = { removivel:"Tela Remov√≠vel", correr:"Tela de Correr", tecido:"Troca de Tecido" };

function calcValue(h,w,tipo){ 
  if(!h || !w) return 0; 
  switch(tipo){
    case 'removivel': return (h+0.1)*(w+0.1)*329*1.05;
    case 'correr': return (h*w*419) + (1.1*1.1);
    case 'tecido': return (h*w*119) + (1.1*1.1);
    default: return 0;
  }
}

function createScreen(index){
  const div=document.createElement('div'); 
  div.className='screen-item';
  div.innerHTML=`
    <div class="screen-header">${screens[index].ambient || 'Nova Tela'}</div>
    <div class="screen-row">
      <label>Ambiente</label>
      <input class="ambient" type="text" placeholder="Ex: Quarto da filha" value="${screens[index].ambient || ''}">
    </div>
    <div class="screen-row">
      <label>Tipo da Tela</label>
      <select class="tipo">
        <option value="removivel" ${screens[index].tipo==='removivel'?'selected':''}>Tela Remov√≠vel</option>
        <option value="correr" ${screens[index].tipo==='correr'?'selected':''}>Tela de Correr</option>
        <option value="tecido" ${screens[index].tipo==='tecido'?'selected':''}>Troca de Tecido</option>
      </select>
    </div>
    <div class="screen-row">
      <label>Altura (m)</label>
      <input class="height" type="number" step="0.01" placeholder="1.20" value="${screens[index].h || ''}">
    </div>
    <div class="screen-row">
      <label>Largura (m)</label>
      <input class="width" type="number" step="0.01" placeholder="0.80" value="${screens[index].w || ''}">
    </div>
    <div class="screen-row">
      <label>Pre√ßo</label>
      <div class="value-display">${screens[index].v ? formatBRL(screens[index].v) : 'R$ 0,00'}</div>
    </div>
    <button class="remove" onclick="removeScreen(${index})">‚ùå Remover</button>
  `;

  const ambient=div.querySelector('.ambient');
  const height=div.querySelector('.height');
  const width=div.querySelector('.width');
  const tipo=div.querySelector('.tipo');
  const valueDisplay=div.querySelector('.value-display');
  const header=div.querySelector('.screen-header');

  ambient.oninput=e=>{
    screens[index].ambient=e.target.value; 
    header.innerText=e.target.value || 'Nova Tela';
  };

  function updateValue(){
    screens[index].h=parseFloat(height.value)||0;
    screens[index].w=parseFloat(width.value)||0;
    screens[index].tipo=tipo.value;
    screens[index].v=calcValue(screens[index].h,screens[index].w,screens[index].tipo);
    valueDisplay.innerText=formatBRL(screens[index].v);
    calcTotals();
  }

  height.oninput=updateValue;
  width.oninput=updateValue;
  tipo.oninput=updateValue;

  return div;
}

function render(){ $('screens').innerHTML=''; screens.forEach((s,i)=>$('screens').appendChild(createScreen(i))); calcTotals(); }
function addScreen(){ screens.push({ambient:'',h:0,w:0,v:0,tipo:'removivel'}); render(); }
function removeScreen(i){ screens.splice(i,1); render(); }

function calcTotals(){ 
  const total=screens.reduce((s,t)=>s+(t.v||0),0);
  $('totalBox').innerText=`Total: ${formatBRL(total)} `;
  return total;
}

function sendWhatsApp(){
  let nome=$('nome').value, tel=$('telefone').value, end=$('endereco').value, bairro=$('bairro').value;
  let total=calcTotals();
  let msg=`*Or√ßamento Telas Mosquiteiras*%0A%0A`;
  msg+=`üë§ Nome: ${nome}%0Aüìû Telefone: ${tel}%0Aüè† Endere√ßo: ${end}, Bairro: ${bairro}%0A%0A`;
  screens.forEach((s,i)=>{
    msg+=`Tela ${i+1} - ${s.ambient}%0ATipo: ${tipoLabels[s.tipo]}%0AAltura: ${s.h}m | Largura: ${s.w}m%0AValor: ${formatBRL(s.v)}%0A%0A`;
  });
  msg+=`üí∞ Total: ${formatBRL(total)}`;
  window.open(`https://wa.me/551341412112?text=${msg}`,'_blank');
}

function resetForm(){ $('nome').value=''; $('telefone').value=''; $('endereco').value=''; $('bairro').value=''; screens=[]; render(); }

render();
</script>
</body>
</html>
